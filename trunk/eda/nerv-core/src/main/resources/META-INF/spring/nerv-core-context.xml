<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

	<bean id="traceFormatter" class="org.apache.camel.processor.interceptor.DefaultTraceFormatter">
		<property name="showBody" value="true" />
		<property name="showBodyType" value="false" />
		<property name="showBreadCrumb" value="false" />
		<property name="maxChars" value="100" />
	</bean>

	<camelContext id="nervDefaultContext" trace="false" autoStartup="true" xmlns="http://camel.apache.org/schema/spring">
		<route id="nervDefaultRoute">
			<from id="nervDirectVm" uri="direct-vm:nerv" />
			<process id="nervHeadersDecorator" ref="nervHeadersDecorator" />
			<process id="nervChannelMapper" ref="nervChannelMapper" />
			<process id="nervEventsInterceptor" ref="nervEventsInterceptor" />
			<dynamicRouter>
				<method id="nervDynamicRouter" ref="nervDynamicRouter" />
			</dynamicRouter>
		</route>
	</camelContext>

	<bean name="eventIdHeaderDecorator" class="com.softwareag.eda.nerv.event.EventIdHeaderDecorator" />
	
	<bean name="startHeaderDecorator" class="com.softwareag.eda.nerv.event.StartHeaderDecorator">
		<constructor-arg name="decorator" ref="eventIdHeaderDecorator" />
	</bean>
	
	<bean name="nervHeadersDecorator" class="com.softwareag.eda.nerv.event.EventHeadersDecorator">
		<constructor-arg name="decorator" ref="startHeaderDecorator" />
	</bean>

	<bean name="nervChannelMapper" class="com.softwareag.eda.nerv.channel.EventTypeToChannelMapper" />

	<bean name="nervDynamicRouter" class="com.softwareag.eda.nerv.route.NERVDynamicRouter" />
		
    <bean name="nervEventsInterceptor" class="com.softwareag.eda.nerv.intercept.EventsInterceptor" factory-method="instance" />

</beans>